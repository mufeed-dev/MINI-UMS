<%- include('../layouts/header.ejs') %>

<div class="profile-edit-page">
  <div class="profile-edit-container">
    <img
      id="profile-preview"
      src="/userImages/<%=user.image%>"
      onerror="this.src='/images/default-profile.png'"
      class="profile-image"
      alt="Profile Image"
    />

    <form action="" method="post" enctype="multipart/form-data">
      <div class="image-upload">
        <label for="image-upload">Change Profile Picture</label>
        <input
          type="file"
          id="image-upload"
          name="image"
          accept="image/*"
          onchange="previewImage(this)"
          style="display: none"
        />
      </div>

      <input type="hidden" name="id" value="<%= user._id %>" />

      <div class="form-group">
        <label>Full Name</label>
        <input
          type="text"
          name="name"
          class="form-control"
          value="<%= user.name %>"
          placeholder="Enter your name"
          required
        />
      </div>

      <div class="form-group">
        <label>Email Address</label>
        <input
          type="email"
          name="email"
          class="form-control"
          value="<%= user.email %>"
          placeholder="Enter your email"
          required
        />
      </div>

      <div class="form-group">
        <label>Mobile Number</label>
        <input
          type="text"
          name="mobile"
          class="form-control"
          value="<%= user.mobile %>"
          placeholder="Enter your mobile number"
          required
        />
      </div>

      <button type="submit" class="submit-btn">Update Profile</button>
    </form>
  </div>
</div>

<script>
  function previewImage(input) {
    const preview = document.getElementById("profile-preview");
    if (input.files && input.files[0]) {
      const reader = new FileReader();
      reader.onload = function (e) {
        preview.src = e.target.result;
      };
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>

<%- include('../layouts/footer.ejs') %>
